<!DOCTYPE html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <title>txti: Login</title>
  <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Raleway:400,300,500,600'>
  <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Source+Code+Pro'>
  <link rel="stylesheet" href="static/css/style.css">
  <link rel="icon" type="image/png" href="static/img/favicon.png">
  <!--[if lt IE 9]>
    <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
  <![endif]-->
  <script src="static/js/jquery.min.js"></script>
</head>
<body class="login">
  <header>
    <h1><a href="/" alt="Home" title="Go back to home page">txti</a></h1>
  </header>
  <section id="login-form">
    <div id="form">
      <section id="login">
        <h3>Log in</h3>
        <form action="/login_push" method="POST">
          <input type="text" name="username" placeholder="Username" autocorrect=off required autofocus>
          <input class="passwordfield" type="password" name="password" placeholder="Password" autocorrect=off required>
          <button type="submit">Log in</button>
        </form>
      </section><section id="register"> <!-- Weird 50% bug. -->
        <h3>Register</h3>
        <form action="/register_push" method="POST">
          <input type="text" name="username" placeholder="Username" autocorrect=off required>
          <input class="passwordfield" type="password" name="password" placeholder="Password" autocorrect=off required>
          <input type="password" placeholder="Confirm password" autocorrect=off required>
          <input type="email" name="email" placeholder="Email address" autocorrect=off required>
          <input type="tel" placeholder="Phone number [Format: +1(905)123-4567]" autocorrect=off required pattern='[\+]\d*[\(]\d*[\)]\d{3}[\-]\d{4}'>
          <button type="submit">Register</button>
        </form>
      </section>
    </div>
  </section>
  <script src="static/js/script.min.js"></script>
  <script src="static/js/sha/sha512.js"></script>
  <script type="text/javascript">
  //autohasher
  var hashed = false;
  $("form").submit(function(evt){
    var pw = $(".passwordfield",this);
    if(!hashed) {
      evt.preventDefault();

      var shaObj = new jsSHA($(pw).text(), "TEXT");
      var hash = shaObj.getHash("SHA-512", "HEX");

      $(pw).text(hash);

      console.log($(pw).text())

      hashed = true;
      setTimeout($(this).submit(),100)
    }
  })
  </script>
</body>
</html>